<!DOCTYPE html>
<html lang="de">
     <head>
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <title>pdfMelange</title>
          <link rel="icon" type="image/vnd.microsoft.icon" href=../../_resources/favicon.ico>

          <!-- Bootstrap -->
          <link href="/pdfMelange/_resources/css/bootstrap.min.css" rel="stylesheet">

          <!-- Unterstützung für Media Queries und HTML5-Elemente in IE8 über HTML5 shim und Respond.js -->
          <!-- ACHTUNG: Respond.js funktioniert nicht, wenn du die Seite über file:// aufrufst -->
          <!--[if lt IE 9]>
           <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
           <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->
     </head>

     <body>
       
         <nav class="navbar navbar-default">
               <div class="container-fluid">
                    <div class="navbar-header">

                         <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                              <span class="sr-only">Navigation ein-/ausblenden</span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                         </button>
                         
                         <a class="navbar-brand" href="/pdfMelange/index.html" title="Home" >
                                pdfMelange 
                         </a>
                    </div>

                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                         <ul class="nav navbar-nav">
                              <li><img src="/pdfMelange/_resources/brand.png" height="50px" width="83px" title="free forever"></li>
                              <li><a href="/pdfMelange/Home/Download.html"> <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> Download </a></li>
                              <li><a href="/pdfMelange/Home/Installation.html"> <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Installation </a></li> 
                              <li><a href="/pdfMelange/Home/Screenshots.html"> <span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Screenshots </a></li> 
                              <li><a href="/pdfMelange/Home/News.html"> <span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> News </a></li> 
                         </ul>
                         
                         <ul class="nav navbar-nav navbar-right">
                             <a href="https://github.com/"> 
                                 <img src="/pdfMelange/_resources/Octocat.png" height="50px" width="50px" title="hosted at GitHub" >
                             </a>
                             <a href="http://zim-wiki.org/">
                                 <img src="/pdfMelange/_resources/zim-wiki.png" height="50px" width="50px" title="pages built with zim-wiki">
                             </a>
                         </ul>
                         
                    </div><!-- /.navbar-collapse -->

               </div>
          </nav>
            
          <div class="container-fluid">
               <div class="row">
                    <div class="col-md-3">
                        <a href="/pdfMelange/index.html">
                            <span class="glyphicon glyphicon-home"></span>
                            Home 
                        </a>
                        <ul>
<li><a href="/pdfMelange/Home/Development_Resources.html" title="Development Resources" class="page">Development Resources</a></li>
<ul>
<li><a href="/pdfMelange/Home/Development_Resources/build_from_C%2B%2B_sources.html" title="build from C++ sources" class="page">build from C++ sources</a></li>
<li><a href="/pdfMelange/Home/Development_Resources/build_from_java_sources.html" title="build from java sources" class="page">build from java sources</a></li>
<li><strong class="activepage">build with minGW</strong></li>
<li><a href="/pdfMelange/Home/Development_Resources/code_snippets.html" title="code snippets" class="page">code snippets</a></li>
<li><a href="/pdfMelange/Home/Development_Resources/links.html" title="links" class="page">links</a></li>
</ul>
<li><a href="/pdfMelange/Home/Download.html" title="Download" class="page">Download</a></li>
<li><a href="/pdfMelange/Home/Installation.html" title="Installation" class="page">Installation</a></li>
<li><a href="/pdfMelange/Home/License.html" title="License" class="page">License</a></li>
<li><a href="/pdfMelange/Home/News.html" title="News" class="page">News</a></li>
<li><a href="/pdfMelange/Home/Screenshots.html" title="Screenshots" class="page">Screenshots</a></li>
</ul>

                    </div>
                    <div class="col-md-9">
                                                                <div class='heading'>
                                    <h1>build with minGW</h1>
                                </div>
                                
                                <div class='content'>
                                   <p>
The Windows binaries are created in a cross compiling environment on a linux host. We neither need a Windows installation nor any non free Windows resources. <br>
</p>

<h3>Requirements and dependencies:</h3>

<p>
<ol type="1" start="1" style='padding-left: 30pt'>
<li><strong>MinGW</strong>: </li>
</ol>
</p>
		
<p>
<ol type="a" start="1" style='padding-left: 60pt'>
<li>Ubuntu 14.04: </li>
</ol>
</p>

<pre style='padding-left: 60pt'>
sudo apt install mingw-w64 mingw-w64-x86-64-dev
</pre>

<p>
<ol type="a" start="2" style='padding-left: 60pt'>
<li>Fedora f20: </li>
</ol>
</p>

<pre style='padding-left: 60pt'>
sudo yum install wget mingw-gcc
</pre>

<p>
<ol type="1" start="2" style='padding-left: 30pt'>
<li><strong>gtkmm</strong>: </li>
</ol>
</p>

<p>
<div style='padding-left: 60pt'>
There are precompiled editions of <em>gtkmm</em> for <em>mingw</em> in repositories of <em>openSuse</em> and <em>fedora</em>, so we don't need to compile gtkmm from its sources.	<br>
</div>
</p>
	
<pre style='padding-left: 60pt'>
sudo yum install mingw32-gtkmm30 mingw32-poppler-glib
</pre>
	
<p>
<div style='padding-left: 60pt'>
You will find all the files in <code>/usr/i686-w64-mingw32/sys-root/mingw.</code><br>
</div>
</p>

<p>
<div style='padding-left: 60pt'>
Install additional icons into <code>sys-root</code>:<br>
</div>
</p>
	
<pre style='padding-left: 60pt'>
wget ftp://ftp.gnome.org/pub/gnome/sources/gnome-icon-theme/3.6/gnome-icon-theme-3.6.0.tar.xz
sudo mkdir -p /usr/i686-w64-mingw32/sys-root/mingw/share/icons
sudo tar xvf gnome-icon-theme-3.6.0.tar.xz \
	-C /usr/i686-w64-mingw32/sys-root/mingw/share/icons \
	gnome-icon-theme-3.6.0/gnome/ --strip-components=1
</pre>
	
<p>
<div style='padding-left: 60pt'>
To use that edition with Ubuntu, take a copy of <code>/usr/i686-w64-mingw32/sys-root/mingw/</code> from a fedora installation to <code>/opt/mingw</code> and modify the pkg-config variables, <br>
</div>
</p>
	
<pre style='padding-left: 60pt'>
cd /opt/mingw/lib/pkgconfig
sed -i "s/usr\/i686-w64-mingw32\/sys-root/opt/g" *.pc
</pre>
	
<p>
<div style='padding-left: 60pt'>
so that <code>pkg-config</code> uses a different installation path (check "Makefile.win32" for details).<br>
</div>
</p>


<h3>Build:</h3>

<p>
<ol type="1" start="1" style='padding-left: 30pt'>
<li><strong>Compile pdfMelange:</strong></li>
</ol>
</p>

<p>
<div style='padding-left: 60pt'>
A particular makefile "<code>Makefile.win32</code>" in the subdirectory <code>"./mingw"</code> is used to build the binaries. Check the makefile variable <code>PKG_PREFIX </code>and start the make.<br>
</div>
</p>
	
<pre style='padding-left: 60pt'>
cd mingw
make -f Makefile.win32
</pre>

<p>
<ol type="1" start="2" style='padding-left: 30pt'>
<li><strong>Build a setup program:</strong></li>
</ol>
</p>

<p>
<div style='padding-left: 60pt'>
It's boring to collect all necessary files for a Windows distribution. We need a lot of library files, icons, etc.  Files have to reside in specific directories and the directories have to be arranged in a special order.<br>
For this process I deliver the script '<code>get_win32_deps.sh</code>' that collects the files and creates a windows setup program:<br>
</div>
</p>

<p>
<ul style='padding-left: 60pt'>
<li>We need an installation of Wine:</li>
</ul>
</p>

<pre style='padding-left: 60pt'>
sudo apt-get install wine
</pre>
		
<p>
<ul style='padding-left: 60pt'>
<li>A Windows version of <strong>'Inno Setup'</strong> needs to be installed:</li>
</ul>
</p>

<pre style='padding-left: 60pt'>
./get_win32_deps.sh depload
./get_win32_deps.sh depinst
</pre>

<p>
<ul style='padding-left: 60pt'>
<li>Start the build process:</li>
</ul>
</p>
	
<pre style='padding-left: 60pt'>
/get_win32_deps.sh buildsetup
</pre>

<p>
<ul style='padding-left: 60pt'>
<li>The target file structure is colleced in '<code>mingw/dist</code>'.</li>
<li>The setup program is copied to '<code>mingw/output</code>'.</li>
</ul>
</p>

                                </div>
                                
                                <br />
                    </div>
               </div>
          </div>    

         <!-- jQuery (wird für Bootstrap JavaScript-Plugins benötigt) -->
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
         <!-- Binde alle kompilierten Plugins zusammen ein (wie hier unten) oder such dir einzelne Dateien nach Bedarf aus -->
         <script src="/pdfMelange/_resources/js/bootstrap.min.js" ></script>
     </body>
</html>
